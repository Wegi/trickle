// Generated by CoffeeScript 1.8.0
var dir, list, modules, numBoxes, path;

numBoxes = 0;

$("#new-box").click(function() {
  var defaultContent;
  defaultContent = "<div class='draggable ui-widget-content module_list' id='box-" + numBoxes + "'> I am a new Box!<br><br> Go and add some modules.<br><br> <a class='' href='#'><span class='glyphicon glyphicon-plus'></span></a> </div>";
  $("#boxes").append(defaultContent);
  $("#box-" + numBoxes).draggable({
    snap: true
  }).resizable();
  sidemenu.close();
  numBoxes++;
  $(".module_list").click(function() {
    list("#" + ($(this).attr('id')));
  });
});


/* Show all modules */

dir = require("node-dir");

path = "modules";

modules = [];

dir.subdirs(path, function(err, subdirs) {
  if (!err) {
    modules = subdirs;
  }
});

list = function(boxid) {
  var content, module, _i, _len;
  content = "<ul>";
  for (_i = 0, _len = modules.length; _i < _len; _i++) {
    module = modules[_i];
    content += "<li>" + module + "</li>";
  }
  content += "</ul>";
  $(boxid).html(content);
};
