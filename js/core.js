// Generated by CoffeeScript 1.8.0

/*
    Trickle Core
 */
var fs, gui, win;

fs = require("fs");

gui = require("nw.gui");

win = gui.Window.get();

fs.readFileSync('data/session.json', "utf8", function(err, data) {
  var session;
  if (err) {
    return session = {};
  } else {
    return session = JSON.parse(data);
  }
});

win.on("close", function() {
  this.hide();
  return fs.writeFile("data/session.json", JSON.stringify(session), function(err) {
    if (err) {
      throw err;
    }
    return this.close(true);
  });
});
