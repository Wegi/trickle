!function(a){a.fn.lightbox_me=function(b){return this.each(function(){function h(){e[0].style,c.destroyOnClose?e.add(d).remove():e.add(d).hide(),c.parentLightbox&&c.parentLightbox.fadeIn(200),c.preventScroll&&a("body").css("overflow",""),f.remove(),e.undelegate(c.closeSelector,"click"),e.unbind("close",h),e.unbind("repositon",k),a(window).unbind("resize",j),a(window).unbind("resize",k),a(window).unbind("scroll",k),a(window).unbind("keyup.lightbox_me"),c.onClose()}function i(a){(27==a.keyCode||27==a.DOM_VK_ESCAPE&&0==a.which)&&c.closeEsc&&h()}function j(){a(window).height()<a(document).height()?(d.css({height:a(document).height()+"px"}),f.css({height:a(document).height()+"px"})):d.css({height:"100%"})}function k(){if(e[0].style,e.css({left:"50%",marginLeft:-1*(e.outerWidth()/2),zIndex:c.zIndex+3}),e.height()+80>=a(window).height()&&"absolute"!=e.css("position")){var d=a(document).scrollTop()+40;e.css({position:"absolute",top:d+"px",marginTop:0})}else e.height()+80<a(window).height()&&(c.centered?e.css({position:"fixed",top:"50%",marginTop:-1*(e.outerHeight()/2)}):e.css({position:"fixed"}).css(c.modalCSS),c.preventScroll&&a("body").css("overflow","hidden"))}var c=a.extend({},a.fn.lightbox_me.defaults,b),d=a(),e=a(this),f=a('<iframe id="foo" style="z-index: '+(c.zIndex+1)+';border: none; margin: 0; padding: 0; position: absolute; width: 100%; height: 100%; top: 0; left: 0; filter: mask();"/>');if(c.showOverlay){var g=a(".js_lb_overlay:visible");d=g.length>0?a('<div class="lb_overlay_clear js_lb_overlay"/>'):a('<div class="'+c.classPrefix+'_overlay js_lb_overlay"/>')}a("body").append(e.hide()).append(d),c.showOverlay&&(j(),d.css({position:"absolute",width:"100%",top:0,left:0,right:0,bottom:0,zIndex:c.zIndex+2,display:"none"}),d.hasClass("lb_overlay_clear")||d.css(c.overlayCSS)),c.showOverlay?d.fadeIn(c.overlaySpeed,function(){k(),e[c.appearEffect](c.lightboxSpeed,function(){j(),k(),c.onLoad()})}):(k(),e[c.appearEffect](c.lightboxSpeed,function(){c.onLoad()})),c.parentLightbox&&c.parentLightbox.fadeOut(200),a(window).resize(j).resize(k).scroll(k),a(window).bind("keyup.lightbox_me",i),c.closeClick&&d.click(function(a){h(),a.preventDefault}),e.delegate(c.closeSelector,"click",function(a){h(),a.preventDefault()}),e.bind("close",h),e.bind("reposition",k)})},a.fn.lightbox_me.defaults={appearEffect:"fadeIn",appearEase:"",overlaySpeed:250,lightboxSpeed:300,closeSelector:".close",closeClick:!0,closeEsc:!0,destroyOnClose:!1,showOverlay:!0,parentLightbox:!1,preventScroll:!1,onLoad:function(){},onClose:function(){},classPrefix:"lb",zIndex:999,centered:!1,modalCSS:{top:"40px"},overlayCSS:{background:"black",opacity:.6}}}(jQuery);
